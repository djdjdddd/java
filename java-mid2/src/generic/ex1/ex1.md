# 제네릭 - Generic1

## 제네릭이 필요한 이유

코드를 보면 숫자를 보관하는 IntegerBox를 생성하고, 그곳에 숫자 10을 보관하고, 꺼낸 다음 출력했다.

마찬가지로 문자열을 보관하는 StringBox를 생성하고, 그곳에 문자열 "hello"를 보관하고, 꺼낸 다음에 출력했다.

이후에 Double, Boolean ...
담는 타입이 수십개라면 수십개의 XxxBox 클래스를 만들어야 한다.
이 문제를 어떻게 해결할 수 있을까?

먼저 다형성을 통해 중복을 해결해보자! 
`Object` 이용!

BoxMain2 코드를 보면 알겠지만 바로 꺼냈을 때 타입이 Object 이다...
추가적인 타입 캐스팅이 필요하다.

하지만 이 방법도 문제가 여전히 존재한다.
1. 다운 캐스팅을 해야 하는 문제
2. 잘못된 타입의 인수 전달 문제

지금까지 개발한 프로그램은 코드 재사용성과 타입 안정성이라는 2마리 토끼를 한번에 잡을 수 없다.
- BoxMain1
  - 코드 재사용 X
  - 타입 안정성 O
- BoxMain2
  - 코드 재사용 O
  - 타입 안정성 X

---

## 제네릭 적용
제네릭을 사용하면 코드 재사용과 타입 안정성이라는 두 마리 토끼를 잡을 수 있다.

### 제네릭 적용 예제
```java
public class GenericBox<T> {

	private T value;

	public T getValue() {
		return value;
	}

	public void setValue(T value) {
		this.value = value;
	}
}
```
- `<>`를 사용한 클래스를 제네릭 클래스라고 한다. 이 기호(`<>`)를 보통 다이아몬드라고 한다.
- 제네릭 클래스를 사용할 때는 `Integer`, `String` 같은 타입을 미리 결정하지 않는다.
- 대신에 클래스명 오른쪽에 `<T>`와 같이 선언하면 제네릭 클래스가 된다. 여기서 `T`를 `타입 매개변수`라 한다.
- 클래스 내부에 `T` 타입이 필요한 곳에 사용하면 된다.
  - ex) `private T value;`

이제 `BoxMain3`를 통해 제네릭의 진가를 알아보자.

참고로 제네릭을 도입한다고 해서 앞서 설명한 `GenericBox<Integer>`와 같은 코드가 실제로 만들어지는 것은 아니다.
대신에 자바 컴파일러가 우리가 입력한 타입 정보를 기반으로 이런 코드가 있다고 가정하고 컴파일 과정에 타입 정보를 반영한다.
이 과정에서 타입이 맞지 않으면 컴파일 오류가 발생한다. 
더 자세한 내용은 뒤에서 설명한다.

아무튼 결과적으로 제네릭 덕분에 `코드 재사용성`과 `타입 안정성`이라는 두 마리 토끼를 잡을 수 있게 됐다.

---

## 제네릭 용어와 관례
제네릭의 핵심은 `사용할 타입을 미리 결정하지 않는다는 점`이다.
클래스 내부에서 사용할 타입을 결정하는 게 `클래스 정의 시점`이 아니라 `클래스 생성 시점`인 것이다.
이는 마치 메서드의 매개변수와 인자의 관계와 비슷하다.

> 제네릭은 AOP처럼 용어가 어려운 편이기 때문에 미리 잘 숙지하고 가는 것이 중요한 것 같습니다.

### 메서드에 필요한 값을 메서드 정의 시점에 미리 결정
미리 `"hello"`라고 결정했기 때문에 `코드 재사용성`이 떨어진다.
```java
void method1(){
	println("hello");
}
```

### 메서드에 필요한 값을 인자를 통해 매개변수로 전달하여 결정
`param`에 원하는 값을 아무거나 줄 수 있다.
```java
void method2(String param){
	println(param);
}
```

### 제네릭의 타입 매개변수와 타입 인자
제네릭에서 사용하는 용어도 매개변수, 인자의 용어를 그대로 가져다 사용한다. 
다만 값이 아니라 타입을 결정하는 것이기 때문에 앞에 `타입`을 붙인다.
- 타입 매개변수: `GenericBox<T>` 에서 `T`
- 타입 인자:
  - `GenericBox<Integer>` 에서 `Integer`
  - `GenericBox<String>` 에서 `String`

### 용어 정리
- 제네릭(Generic) 단어
  - 제네릭이라는 단어는 일반적인, 범용적인이라는 영어 단어 뜻이다.
  - 풀어보면 특정 타입에 속한 것이 아니라 일반적으로, 범용적으로 사용할 수 있다는 뜻이다.
- 제네릭 타입 (Generic Type)
  - 클래스나 인터페이스를 정의할 때 타입 매개변수를 사용하는 것을 말한다.
  - **제네릭 클래스, 제네릭 인터페이스를 모두 합쳐서 제네릭 타입**이라 한다.
    - 타입은 클래스, 인터페이스, 기본형(`int`등)을 모두 합쳐서 부르는 말이다.
  - 예: `class GenericBox<T> { private T t; }`
  - 여기에서 `GenericBox<T>`를 제네릭 타입이라 한다.
- 타입 매개변수 (Type Parameter)
  - 제네릭 타입이나 메서드에서 사용되는 변수로, 실제 타입으로 대체된다.
  - 예: `GenericBox<T>`
  - 여기에서 `T`를 타입 매개변수라 한다.
- 타입 인자 (Type Argument)
  - 제네릭 타입을 사용할 때 제공되는 실제 타입이다.
  - 예: `GenericBox<Integer>`
  - 여기에서 `Integer`를 타입 인자라 한다


### 제네릭 명명 관례
- E : Element
- K : Key
- V : Value
- N : Number
- T : Type
- S,U,V etc. : 2nd, 3rd, 4th types


### 로 타입 - raw type
이런 로 타입을 지원하는 것일까?
자바의 제네릭이 자바가 처음 등장할 때 부터 있었던 것이 아니라 자바가 오랜기간 사용된 이후에 등장했기 때문에 제네릭이 없던 시절의 과거 코드와의 하위 호환이 필요했다. 
그래서 어쩔 수 없이 이런 로 타입을 지원한다.

---

## 제네릭 활용 예제